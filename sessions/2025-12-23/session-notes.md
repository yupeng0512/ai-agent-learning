# Session: 2025-12-23

## 主题：Workflow vs Agentic 的区别

### 核心区别

| 维度 | Workflow (工作流) | Agentic (智能体) |
|------|------------------|-----------------|
| **控制流** | 预定义、固定路径 | 动态、LLM 自主决策 |
| **决策者** | 开发者写死逻辑 | LLM 实时判断 |
| **灵活性** | 低，只能走设计好的路 | 高，能应对未预见情况 |
| **可预测性** | 高，结果稳定 | 低，可能有意外行为 |
| **复杂度** | 简单，易调试 | 复杂，难追踪 |

### 形象类比

```
Workflow = 流水线工人
- 按 SOP 执行：步骤1 → 步骤2 → 步骤3
- 遇到异常就停下来等人处理
- 没有"想法"，只有"动作"

Agentic = 有经验的员工
- 有目标，自己规划怎么达成
- 遇到问题会思考、调整方案
- 有"记忆"，能从历史中学习
```

### 关键洞察

- **大脑** = LLM 的推理能力（决定下一步做什么）
- **记忆** = 对话历史 / 长期记忆存储
- Workflow 也可以有记忆，区别在于**谁在做决策**——代码逻辑 vs LLM

### 实际选择建议

| 场景 | 推荐 | 原因 |
|------|------|------|
| 客服问答、文档检索 | Workflow | 流程固定，要稳定 |
| 数据 ETL 处理 | Workflow | 步骤明确，不需要"思考" |
| 复杂研究任务 | Agentic | 需要多轮探索、自主决策 |
| 代码生成+调试 | Agentic | 需要根据错误动态调整 |
| **生产环境** | **偏 Workflow** | 可控、可预测、成本低 |

### 代码示例

见 `code-snippets/langchain/workflow_vs_agentic.py`

---

## 主题：Prompt 格式对比（XML vs Markdown vs 自然语言）

### 核心结论

**对 Claude 来说，XML 标签确实更有效**，但不是绝对的。

### 格式对比

| 格式 | 优势 | 劣势 | 适用场景 |
|------|------|------|---------|
| **XML** | 边界清晰、嵌套结构、输出稳定 | 写起来繁琐 | 复杂任务、多段输入 |
| **Markdown** | 人类可读性好 | 边界模糊 | 简单格式化输出 |
| **自然语言** | 最灵活、最自然 | 结构不明确 | 简单任务 |

### 实验结果

运行 `prompt_format_comparison.py` 对比三种格式：

| 格式 | 输入 tokens | 输出 tokens | 输出特点 |
|------|------------|------------|---------|
| 自然语言 | 70 | 698 | 格式自由，结构不固定 |
| Markdown | 95 | 1170 | 按 Markdown 格式输出 |
| XML | 208 | 959 | **严格按定义的标签结构输出** |

### 为什么 XML 对 Claude 效果更好？

1. **训练数据**：Claude 训练时大量使用 XML 标签结构
2. **边界清晰**：`<tag>...</tag>` 比 `## 标题` 更明确
3. **嵌套支持**：XML 天然支持复杂嵌套结构
4. **解析友好**：模型更容易理解输入的不同部分

### XML Prompt 常用标签

```xml
<role>角色定义</role>
<task>
  <objective>任务目标</objective>
  <constraints>约束条件</constraints>
</task>
<context>背景信息</context>
<input>用户输入</input>
<output_format>输出格式要求</output_format>
<examples>示例</examples>
```

### 使用建议

1. **简单任务** → 自然语言即可
2. **需要格式化输出** → Markdown
3. **复杂任务/多段输入/需要稳定输出** → XML
4. **混合使用**：XML 做结构，内容用 Markdown

### 代码示例

见 `code-snippets/basics/prompt_format_comparison.py`
